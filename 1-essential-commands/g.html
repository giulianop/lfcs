<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Archive, backup, compress, unpack, and uncompress files - Linux Foundation Certified System Administrator (LFCS) Exam Personal Notes </title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/index.html"><strong aria-hidden="true">1.</strong> Essential Commands - 25%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../1-essential-commands/a.html"><strong aria-hidden="true">1.1.</strong> Log into local & remote graphical and text mode consoles</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/b.html"><strong aria-hidden="true">1.2.</strong> Search for files</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/c.html"><strong aria-hidden="true">1.3.</strong> Evaluate and compare the basic file system features and options</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/d.html"><strong aria-hidden="true">1.4.</strong> Compare and manipulate file content</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/e.html"><strong aria-hidden="true">1.5.</strong> Use input-output redirection</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/f.html"><strong aria-hidden="true">1.6.</strong> Analyze text using basic regular expressions</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/g.html" class="active"><strong aria-hidden="true">1.7.</strong> Archive, backup, compress, unpack, and uncompress files</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/h.html"><strong aria-hidden="true">1.8.</strong> Create, delete, copy, and move files and directories</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/i.html"><strong aria-hidden="true">1.9.</strong> Create and manage hard and soft links</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/l.html"><strong aria-hidden="true">1.10.</strong> List, set, and change standard file permissions</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/m.html"><strong aria-hidden="true">1.11.</strong> Read, and use system documentation</a></li><li class="chapter-item expanded "><a href="../1-essential-commands/n.html"><strong aria-hidden="true">1.12.</strong> Manage access to the root account</a></li></ol></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/index.html"><strong aria-hidden="true">2.</strong> Operation of Running Systems - 20%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/a.html"><strong aria-hidden="true">2.1.</strong> Boot, reboot, and shut down a system safely</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/b.html"><strong aria-hidden="true">2.2.</strong> Boot or change system into different operating modes</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/c.html"><strong aria-hidden="true">2.3.</strong> Install, configure and troubleshoot bootloaders</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/d.html"><strong aria-hidden="true">2.4.</strong> Diagnose and manage processes</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/e.html"><strong aria-hidden="true">2.5.</strong> Locate and analyze system log files</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/f.html"><strong aria-hidden="true">2.6.</strong> Schedule tasks to run at a set date and time</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/g.html"><strong aria-hidden="true">2.7.</strong> Verify completion of scheduled jobs</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/h.html"><strong aria-hidden="true">2.8.</strong> Update software to provide required functionality and security</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/i.html"><strong aria-hidden="true">2.9.</strong> Verify the integrity and availability of resources</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/l.html"><strong aria-hidden="true">2.10.</strong> Verify the integrity and availability of key processes</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/m.html"><strong aria-hidden="true">2.11.</strong> Change kernel runtime parameters, persistent and non-persistent</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/n.html"><strong aria-hidden="true">2.12.</strong> Use scripting to automate system maintenance tasks</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/o.html"><strong aria-hidden="true">2.13.</strong> Manage the startup process and services</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/p.html"><strong aria-hidden="true">2.14.</strong> List and identify SELinux/AppArmor file and process contexts</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/q.html"><strong aria-hidden="true">2.15.</strong> Manage software</a></li><li class="chapter-item expanded "><a href="../2-operation-of-running-systems/r.html"><strong aria-hidden="true">2.16.</strong> Identify the component of a Linux distribution that a file belongs to</a></li></ol></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/index.html"><strong aria-hidden="true">3.</strong> User and Group Management - 10%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../3-user-and-group-management/a.html"><strong aria-hidden="true">3.1.</strong> Create, delete, and modify local user accounts</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/b.html"><strong aria-hidden="true">3.2.</strong> Create, delete, and modify local groups and group memberships</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/c.html"><strong aria-hidden="true">3.3.</strong> Manage system-wide environment profiles</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/d.html"><strong aria-hidden="true">3.4.</strong> Manage template user environment</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/e.html"><strong aria-hidden="true">3.5.</strong> Configure user resource limits</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/f.html"><strong aria-hidden="true">3.6.</strong> Manage user privileges</a></li><li class="chapter-item expanded "><a href="../3-user-and-group-management/g.html"><strong aria-hidden="true">3.7.</strong> Configure PAM</a></li></ol></li><li class="chapter-item expanded "><a href="../4-networking/index.html"><strong aria-hidden="true">4.</strong> Networking - 12%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../4-networking/a.html"><strong aria-hidden="true">4.1.</strong> Configure networking and hostname resolution statically or dynamically</a></li><li class="chapter-item expanded "><a href="../4-networking/b.html"><strong aria-hidden="true">4.2.</strong> Configure network services to start automatically at boot</a></li><li class="chapter-item expanded "><a href="../4-networking/c.html"><strong aria-hidden="true">4.3.</strong> Implement packet filtering (iptables, firewalld or ufw)</a></li><li class="chapter-item expanded "><a href="../4-networking/d.html"><strong aria-hidden="true">4.4.</strong> Start, stop, and check the status of network services</a></li><li class="chapter-item expanded "><a href="../4-networking/e.html"><strong aria-hidden="true">4.5.</strong> Statically route IP traffic</a></li><li class="chapter-item expanded "><a href="../4-networking/f.html"><strong aria-hidden="true">4.6.</strong> Synchronize time using other network peers</a></li></ol></li><li class="chapter-item expanded "><a href="../5-service-configuration/index.html"><strong aria-hidden="true">5.</strong> Service Configuration - 20%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../5-service-configuration/a.html"><strong aria-hidden="true">5.1.</strong> Configure a caching DNS server</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/b.html"><strong aria-hidden="true">5.2.</strong> Maintain a DNS zone</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/c.html"><strong aria-hidden="true">5.3.</strong> Configure email aliases</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/d.html"><strong aria-hidden="true">5.4.</strong> Configure SSH servers and clients</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/e.html"><strong aria-hidden="true">5.5.</strong> Restrict access to the HTTP proxy server</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/f.html"><strong aria-hidden="true">5.6.</strong> Configure an IMAP and IMAPS service</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/g.html"><strong aria-hidden="true">5.7.</strong> Query and modify the behavior of system services at various operating modes</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/h.html"><strong aria-hidden="true">5.8.</strong> Configure an HTTP server</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/i.html"><strong aria-hidden="true">5.9.</strong> Configure HTTP server log files</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/l.html"><strong aria-hidden="true">5.10.</strong> Configure a database server</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/m.html"><strong aria-hidden="true">5.11.</strong> Restrict access to a web page</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/n.html"><strong aria-hidden="true">5.12.</strong> Manage and configure containers</a></li><li class="chapter-item expanded "><a href="../5-service-configuration/o.html"><strong aria-hidden="true">5.13.</strong> Manage and configure Virtual Machines</a></li></ol></li><li class="chapter-item expanded "><a href="../6-storage-management/index.html"><strong aria-hidden="true">6.</strong> Storage Management - 13%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../6-storage-management/a.html"><strong aria-hidden="true">6.1.</strong> List, create, delete, and modify physical storage partitions</a></li><li class="chapter-item expanded "><a href="../6-storage-management/b.html"><strong aria-hidden="true">6.2.</strong> Manage and configure LVM storage</a></li><li class="chapter-item expanded "><a href="../6-storage-management/c.html"><strong aria-hidden="true">6.3.</strong> Create and configure encrypted storage</a></li><li class="chapter-item expanded "><a href="../6-storage-management/d.html"><strong aria-hidden="true">6.4.</strong> Configure systems to mount file systems at or during boot</a></li><li class="chapter-item expanded "><a href="../6-storage-management/e.html"><strong aria-hidden="true">6.5.</strong> Configure and manage swap space</a></li><li class="chapter-item expanded "><a href="../6-storage-management/f.html"><strong aria-hidden="true">6.6.</strong> Create and manage RAID devices</a></li><li class="chapter-item expanded "><a href="../6-storage-management/g.html"><strong aria-hidden="true">6.7.</strong> Configure systems to mount file systems on demand</a></li><li class="chapter-item expanded "><a href="../6-storage-management/h.html"><strong aria-hidden="true">6.8.</strong> Create, manage and diagnose advanced file system permissions</a></li><li class="chapter-item expanded "><a href="../6-storage-management/i.html"><strong aria-hidden="true">6.9.</strong> Setup user and group disk quotas for filesystems</a></li><li class="chapter-item expanded "><a href="../6-storage-management/l.html"><strong aria-hidden="true">6.10.</strong> Create and configure file systems</a></li></ol></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/index.html"><strong aria-hidden="true">7.</strong> Bonus/Miscellanea - 0%</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/bash.html"><strong aria-hidden="true">7.1.</strong> bash</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/git.html"><strong aria-hidden="true">7.2.</strong> git</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/grub.html"><strong aria-hidden="true">7.3.</strong> Repair the GRUB from live CD or USB stick</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/ca-certs.html"><strong aria-hidden="true">7.4.</strong> Install a CA certificate</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/self-signed-ssl-cert.html"><strong aria-hidden="true">7.5.</strong> Create a self-signed SSL certificate for Apache web server</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/tls-issues.html"><strong aria-hidden="true">7.6.</strong> Debugging TLS handshake issues</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/dns.html"><strong aria-hidden="true">7.7.</strong> DNS essentials</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/net-manager.html"><strong aria-hidden="true">7.8.</strong> Network-Manager</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/ssh-tunneling.html"><strong aria-hidden="true">7.9.</strong> SSH-tunneling</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/corrupted-chars.html"><strong aria-hidden="true">7.10.</strong> Debugging corrupted character encoding issues</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/mic.html"><strong aria-hidden="true">7.11.</strong> How to test a microphone</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/ssh-login.html"><strong aria-hidden="true">7.12.</strong> Automate login via SSH</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/edid.html"><strong aria-hidden="true">7.13.</strong> How to fix low screen resolution</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/debian.html"><strong aria-hidden="true">7.14.</strong> Non-Free Firmware for Debian</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/nvidia.html"><strong aria-hidden="true">7.15.</strong> How to fix Nvidia graphics card problems</a></li><li class="chapter-item expanded "><a href="../https://bios-pw.org/#.html"><strong aria-hidden="true">7.16.</strong> Quick and easy way to recover BIOS passwords on laptops</a></li><li class="chapter-item expanded "><a href="../7-bonus-miscellanea/tips-tricks.html"><strong aria-hidden="true">7.17.</strong> Tips & tricks</a></li></ol></li><li class="chapter-item expanded "><a href="../references.html"><strong aria-hidden="true">8.</strong> References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Foundation Certified System Administrator (LFCS) Exam Personal Notes </h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/giulianopz/lfcs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/giulianopz/lfcs/edit/main/domains/1-essential-commands/g.md " title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="archive-backup-compress-unpack-and-uncompress-files"><a class="header" href="#archive-backup-compress-unpack-and-uncompress-files">Archive, backup, compress, unpack, and uncompress files</a></h2>
<p>The idea of “archiving” data generally means backing it up and saving it to a secure location, often in a compressed format. An “archive” on a Linux server in general has a slightly different meaning. Usually it refers to a <code>tar</code> file.</p>
<p>Historically, data from servers was often backed up onto tape archives, which are magnetic tape devices that can be used to store sequential data. This is still the preferred backup method for some industries. In order to do this efficiently, the tar program was created so that you can address and manipulate many files in a filesystem, with intact permissions and metadata, as one file. You can then extract a file or the entire filesystem from the archive.</p>
<p>Basically, a tar file (or a <strong>tarball</strong>) is a file format that creates a convenient way to distribute, store, back up, and manipulate groups of related files. Tar is normally used with a compression tool such as <code>gzip</code>, <code>bzip2</code>, or <code>xz</code> to produce a compressed tarball.</p>
<p><strong>gzip</strong> is the oldest compression tool and provides the least compression, while <strong>bzip2</strong> provides improved compression. In addition, <strong>xz</strong> is the newest but (usually) provides the best compression. This advantage comes at a price: the time it takes to complete the operation, and system resources used during the process. Normally, tar files compressed with these utilities have <strong>.gz</strong>, <strong>.bz2</strong>, or <strong>.xz</strong> extensions, respectively.</p>
<div class="table-wrapper"><table><thead><tr><th>Long option</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody>
<tr><td>–create</td><td>c</td><td>Creates a tar archive</td></tr>
<tr><td>–concatenate</td><td>A</td><td>Appends tar files to an archive</td></tr>
<tr><td>–append</td><td>r</td><td>Appends files to the end of an archive</td></tr>
<tr><td>–update</td><td>u</td><td>Appends files newer than copy in archive</td></tr>
<tr><td>–diff or –compare</td><td>d</td><td>Find differences between archive and file system</td></tr>
<tr><td>–file [archive]</td><td>f</td><td>Use archive file or device <em>archive</em></td></tr>
<tr><td>–list</td><td>t</td><td>Lists the contents of a tarball</td></tr>
<tr><td>–extract or –get</td><td>x</td><td>Extracts files from an archive</td></tr>
<tr><td>–directory [dir]</td><td>C</td><td>Changes to directory dir before performing operations</td></tr>
<tr><td>–same-permissions</td><td>p</td><td>Preserves original permissions</td></tr>
<tr><td>–verbose</td><td>v</td><td>Lists all files read or extracted. When this flag is used along with –list, the file sizes, ownership, and time stamps are displayed.</td></tr>
<tr><td>–verify</td><td>W</td><td>Verifies the archive after writing it</td></tr>
<tr><td>–exclude [file]</td><td>—</td><td>Excludes file from the archive</td></tr>
<tr><td>–exclude=pattern</td><td>X</td><td>Exclude files, given as a <em>pattern</em></td></tr>
<tr><td>–gzip or –gunzip</td><td>z</td><td>Processes an archive through gzip</td></tr>
<tr><td>–bzip2</td><td>j</td><td>Processes an archive through bzip2</td></tr>
<tr><td>–xz</td><td>J</td><td>Processes an archive through xz</td></tr>
</tbody></table>
</div>
<p>List the contents of a tarball : <code>tar tvf [tarball]</code></p>
<p>Update or append operations cannot be applied to compressed files directly:</p>
<pre><code>gzip -d &lt;myfiles.tar.gz&gt;
tar --delete --file &lt;myfiles.tar&gt; &lt;file4&gt;       # deletes the file inside the tarball
tar --update --file &lt;myfiles.tar&gt; &lt;file4&gt;       # adds the updated file
gzip myfiles.tar
</code></pre>
<p>Exclude files from backup depending on file type (e.g. mpeg):
<code>tar X &lt;(for i in $DIR/*; do file $i | grep -i mpeg; if [ $? -eq 0 ]; then echo $i; fi; done) -cjf backupfile.tar.bz2 $DIR/*</code></p>
<p>Restore backups preserving permissions: <code>tar xjf backupfile.tar.bz2 --directory user_restore --same-permissions</code></p>
<p>Only store files newer than a given date (i.e. <em>differential backup</em>): <code>tar --create --newer '2011-12-1' -vf backup1.tar /var/tmp</code></p>
<blockquote>
<p>Note: If [date] starts with <code>/</code> or <code>.</code> it is taken to be a filename and the ctime of that file is used as the date.</p>
</blockquote>
<blockquote>
<p>Note: A differential backup backs up only the files that changed since the last full back. Incremental backups also back up only the changed data, but they only back up the data that has changed since the last backup — be it a full or incremental backup.</p>
</blockquote>
<blockquote>
<p>Note: Each instance of <code>--verbose</code> on the command line increases the verbosity level by one, so if you need more details on the output, specify it twice. </p>
</blockquote>
<p>To create incremental backups:</p>
<pre><code>mkdir data
echo &quot;File1 Data&quot; &gt; data/file1
echo &quot;File2 Data&quot; &gt; data/file2
tar --create --listed-incremental=data.snar --verbose --verbose --file=data.tar data
&gt;tar: data: Directory is new
&gt;drwxrwxr-x ubuntu/ubuntu     0 2018-04-03 14:00 data/
&gt;-rw-rw-r-- ubuntu/ubuntu     5 2018-04-03 14:00 data/file1
&gt;-rw-rw-r-- ubuntu/ubuntu     5 2018-04-03 14:00 data/file2

echo &quot;File3 Data&quot; &gt; data/file3
tar --create --listed-incremental=data.snar --verbose --verbose --file=data1.tar data
&gt;drwxrwxr-x ubuntu/ubuntu     0 2018-04-03 14:41 data/
&gt;-rw-rw-r-- ubuntu/ubuntu    11 2018-04-03 14:41 data/file3

echo &quot;more data&quot; &gt;&gt; data/file2
tar --create --listed-incremental=data.snar --verbose --verbose --file=data2.tar data
&gt;drwxrwxr-x ubuntu/ubuntu     0 2018-04-03 14:41 data/
&gt;-rw-rw-r-- ubuntu/ubuntu    15 2018-04-03 14:47 data/file2

rm data/file1
tar --create --listed-incremental=data.snar --verbose --verbose --file=data3.tar data
&gt;drwxrwxr-x ubuntu/ubuntu     0 2018-04-03 14:55 data/

tar --list --verbose --verbose --listed-incremental=data.snar --file=data3.tar
&gt;drwxrwxr-x ubuntu/ubuntu    15 2018-04-03 14:55 data/
&gt;N file2
&gt;N file3

# restore the dir one backup at a time

tar --extract --verbose --verbose --listed-incremental=/dev/null --file=data.tar
&gt;drwxrwxr-x ubuntu/ubuntu    15 2018-04-03 14:00 data/
&gt;-rw-rw-r-- ubuntu/ubuntu     5 2018-04-03 14:00 data/file1
&gt;-rw-rw-r-- ubuntu/ubuntu     5 2018-04-03 14:00 data/file2
cat data/file1 data/file2
&gt;File1 Data
&gt;File2 Data

tar --extract --verbose --verbose --listed-incremental=/dev/null --file=data1.tar
&gt;drwxrwxr-x ubuntu/ubuntu    22 2018-04-03 14:41 data/
&gt;-rw-rw-r-- ubuntu/ubuntu    11 2018-04-03 14:41 data/file3

tar --extract --verbose --verbose --listed-incremental=/dev/null --file=data2.tar
&gt;drwxrwxr-x ubuntu/ubuntu    22 2018-04-03 14:41 data/
&gt;-rw-rw-r-- ubuntu/ubuntu    15 2018-04-03 14:47 data/file2
cat data/file2
&gt;File2 Data
&gt;more data

tar --extract --verbose --verbose --listed-incremental=/dev/null --file=data3.tar
&gt;drwxrwxr-x ubuntu/ubuntu    15 2018-04-03 14:55 data/
&gt;tar: Deleting ‘data/file1'

# the dir is now up-to-date to the last backup
</code></pre>
<blockquote>
<p>Note: Each backup uses the same meta file (.sar) but its own archive. </p>
</blockquote>
<hr />
<p><code>rsync</code> is a fast and versatile command-line utility for synchronizing files and directories between two locations over a remote shell, or from/to a remote rsync daemon. It provides fast incremental file transfer by transferring only the differences between the source and the destination. It finds files that need to be transferred using a &quot;quick check&quot; algorithm (by default) that looks for files that have changed in size or in last-modified time.</p>
<p><code>sync</code> can be used for mirroring data, incremental backups, copying files between systems, and as a replacement for <code>scp</code>, <code>sftp</code>, and <code>cp</code> commands.</p>
<p>rsync provides a number of options that control how the command behaves. The most widely used options are:</p>
<ul>
<li><code>-a</code>, <code>--archive</code>, archive mode, equivalent to <code>-rlptgoD</code>, this option tells rsync to syncs directories recursively, transfer special and block devices, preserve symbolic links, modification times, groups, ownership, and permissions</li>
<li><code>-n</code>, <code>--dry-run</code>, perform a trial run with no changes made</li>
<li><code>-z</code>, <code>--compress</code>, this option forces rsync to compresses the data as it is sent to the destination machine</li>
</ul>
<blockquote>
<p>Tip: Use this option only if the connection to the remote machine is slow.</p>
</blockquote>
<ul>
<li><code>-P</code>, equivalent to <code>--partial --progress</code>, when this option is used, rsync shows a progress bar during the transfer and keeps the partially transferred files. </li>
</ul>
<blockquote>
<p>Tip: Useful when transferring large files over slow or unstable network connections.</p>
</blockquote>
<ul>
<li><code>--delete</code>, when this option is used, rsync deletes extraneous files from the destination location, it is useful for mirroring</li>
<li><code>-q</code>, <code>--quiet</code>, use this option if you want to suppress non-error messages</li>
<li><code>-e</code>, this option allows you to choose a different remote shell, by default, rsync is configured to use ssh.</li>
</ul>
<h3 id="basic-rsync-usage"><a class="header" href="#basic-rsync-usage">Basic Rsync Usage</a></h3>
<p>The most basic use case of rsync is to copy a single file from one to another local location: <code>rsync -a /opt/filename.zip /tmp/</code></p>
<blockquote>
<p>Note: The user running the command must have read permissions on the source location and write permissions on the destination.</p>
</blockquote>
<p>Omitting the filename from the destination location copies the file with the current name. If you want to save the file under a different name, specify the new name on the destination part: <code>rsync -a /opt/filename.zip /tmp/newfilename.zip</code></p>
<p>The real power of rsync comes when synchronizing directories. The example below shows how to create a local backup of website files:
<code>rsync -a /var/www/domain.com/public_html/ /var/www/domain.com/public_html_backup/</code></p>
<blockquote>
<p>Note: If the destination directory doesn't exist, rsync will create it.</p>
</blockquote>
<blockquote>
<p>Note: It is worth mentioning that rsync gives different treatment to the source directories with a trailing slash (<code>/</code>). If the source directory has a trailing slash, the command will copy only the directory contents to the destination directory. When the trailing slash is omitted, rsync copies the source directory inside the destination directory.</p>
</blockquote>
<h3 id="using-rsync-to-sync-data-fromto-a-remote-machine"><a class="header" href="#using-rsync-to-sync-data-fromto-a-remote-machine">Using rsync to sync data from/to a remote machine</a></h3>
<p>When using rsync to transfer data remotely, it must be installed on both the source and the destination machine. The new versions of rsync are configured to use SSH as default remote shell.</p>
<p>In the following example, we are transferring a directory from a local to a remote machine: 
<code>rsync -a /opt/media/ remote_user@remote_host_or_ip:/opt/media/</code></p>
<blockquote>
<p>Note: If we run the command again, we will get a shorter output, because no changes have been made. This illustrates rsync's ability to use modification times to determine if changes have been made.</p>
</blockquote>
<p>To transfer data from a remote to a local machine, use the remote location as a source:
<code>rsync -a remote_user@remote_host_or_ip:/opt/media/ /opt/media/</code></p>
<p>If SSH on the remote host is listening on a port other than the default 22, specify the port using the <code>-e</code> option:
<code>rsync -a -e &quot;ssh -p 2322&quot; /opt/media/ remote_user@remote_host_or_ip:/opt/media/</code></p>
<p>When transferring large amounts of data it is recommended to run the rsync command inside a screen session or to use the <code>-P</code> option:
<code>rsync -a -P remote_user@remote_host_or_ip:/opt/media/ /opt/media/</code></p>
<h3 id="exclude-files-and-directories"><a class="header" href="#exclude-files-and-directories">Exclude Files and Directories</a></h3>
<p>There are two options to exclude files and directories. The first option is to use the <code>--exclude</code> argument and specify the files and directories you want to exclude on the command line. When excluding files or directories, you need to use their relative paths to the source location.</p>
<p>In the following example shows how exclude the node_modules and tmp directories:
<code>rsync -a --exclude=node_modules --exclude=tmp /src_directory/ /dst_directory/</code></p>
<p>The second option is to use the <code>--exclude-from</code> option and specify the files and directories you want to exclude in a file:
<code>rsync -a --exclude-from='/exclude-file.txt' /src_directory/ /dst_directory/</code></p>
<p>The content of <code>/exclude-file.txt</code> can be something like:</p>
<pre><code>node_modules
tmp
</code></pre>
<hr />
<p>To make a full raw device backup: <code>sudo dd if=/dev/sda of=/dev/sdb1 bs=64K conv=noerror,sync status=progress</code></p>
<p>To create a compressed image: <code>sudo dd if=/dev/sda conv=sync,noerror bs=64K | gzip -c  &gt; /PATH/TO/DRIVE/backup_image.img.gz</code></p>
<p>To restore it: <code>gunzip -c /PATH/TO/DRIVE/backup_image.img.gz | dd of=/dev/sda</code></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../1-essential-commands/f.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../1-essential-commands/h.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../1-essential-commands/f.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../1-essential-commands/h.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
